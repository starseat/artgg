
/**
 * CI 세션
 */
CREATE TABLE `ci_sessions` (
  `id` varchar(48) NOT NULL DEFAULT '0',
  `ip_address` varchar(16) NOT NULL DEFAULT '0',
  `timestamp` int unsigned NOT NULL DEFAULT '0',
  `user_agent` varchar(128) NOT NULL,
  `last_activity` int unsigned NOT NULL DEFAULT '0',
  `data` text NOT NULL,
  PRIMARY KEY (`id`,`ip_address`),
  KEY `ci_sessions_timestamp` (`timestamp`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;;

/**
 * 아트경기 회원
 * - member_type:
 *  + A: Admin
 *  + M: Manager
 *  + B: Basic
 */
CREATE TABLE artgg_members (
	seq BIGINT NOT NULL AUTO_INCREMENT,
	user_id VARCHAR(32) NOT NULL,    
	email VARCHAR(64) NULL,
	name VARCHAR(32) NULL DEFAULT NULL,
	password VARCHAR(128) NOT NULL,
	member_type CHAR(1) NOT NULL DEFAULT 'B',
	created_at DATETIME NOT NULL DEFAULT now(),
	updated_at DATETIME NOT NULL DEFAULT now(),
	deleted_at DATETIME NULL DEFAULT NULL,
	PRIMARY KEY (seq, user_id),
	UNIQUE INDEX user_id (user_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/**
 * 아트경기 프로그램의 파일
 */
CREATE TABLE artgg_file (
	seq BIGINT NOT NULL AUTO_INCREMENT, 
	target_seq BIGINT NOT NULL, 
    target VARCHAR(16) NOT NULL,   -- 'program, notice, promotion'
	sort TINYINT, 
    real_name VARCHAR(256) NOT NULL, 
	save_name VARCHAR(512) NOT NULL, 
    upload_path VARCHAR(2048) NOT NULL, 
	caption1 VARCHAR(1024), 
	caption2 VARCHAR(128), 
	caption3 VARCHAR(128), 
	link VARCHAR(1024), 
	type VARCHAR(1) NOT NULL DEFAULT 'I', -- I: image, V: video, F: file, T: thumbnail
	storage_type VARCHAR(1) NOT NULL DEFAULT 'L', -- L: local, W: Web	
    created_at DATETIME NOT NULL DEFAULT now(),
	PRIMARY KEY (`seq`, `target_seq`, `target` )
) COLLATE='utf8mb4_unicode_ci' ENGINE=InnoDB;


/**
 * 아트경기 공지사항
 *  - level: 3: 긴급, 2: 중요, 1: 일반
 */
CREATE TABLE artgg_notice (
	seq BIGINT NOT NULL AUTO_INCREMENT, 
    level TINYINT, 
    title VARCHAR(512) NOT NULL, 
    contents TEXT NOT NULL,
	view_count INT NOT NULL DEFAULT 0, 
	created_at DATETIME NOT NULL DEFAULT now(),
	updated_at DATETIME NOT NULL DEFAULT now(),
	deleted_at DATETIME NULL DEFAULT NULL, 
	PRIMARY KEY (`seq` )
) COLLATE='utf8mb4_unicode_ci' ENGINE=InnoDB;


/**
 * 아트경기 팝업
 */
CREATE TABLE artgg_popup (
	seq BIGINT NOT NULL, 
	active_yn CHAR(1) NOT NULL, -- 0: off, 1: on
    type VARCHAR(16) NOT NULL, -- link, notice
	param VARCHAR(1024), -- link, notice => seq
	updated_at DATETIME NOT NULL DEFAULT now(),
	PRIMARY KEY (`seq` )
) COLLATE='utf8mb4_unicode_ci' ENGINE=InnoDB;
